{"version":3,"sources":["game.js"],"names":["Game","total_squiggle","total_bubbles","total_square","total_triangle","total_objects","body_content","document","querySelectorAll","gameobjects","initBackground","forEach","row","i","setTimeout","firstElementChild","classList","add","sortShapes","length","remove","background","createElement","distance","x1","y1","x2","y2","Math","sqrt","x","random","y","filter","shape","el","innerHTML","style","transform","round","min","floor","appendChild","push","GameObject","body","insertBefore","childNodes","col_count","last_shape","map","o","render","element","transition","left","top","window","game"],"mappings":"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","file":"game.js","sourcesContent":["class Game {\n\n\tconstructor() {\n\t\tthis.total_squiggle = 8\n\t\tthis.total_bubbles = 8\n\t\tthis.total_square = 20\n\t\tthis.total_triangle = 20\n\t\tthis.total_objects = this.total_squiggle + this.total_bubbles + this.total_square + this.total_triangle\n\n\t\tthis.body_content = document.querySelectorAll('body > .sw')\n\t\tthis.gameobjects = []\n\t\tthis.initBackground()\n\t\t// this.initGame()\n\t}\n\n\tinitGame() {\n\t\tthis.body_content.forEach((row, i) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\trow.firstElementChild.classList.add('fall')\n\t\t\t}, i * 600)\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\tthis.sortShapes()\n\t\t}, this.body_content.length * 600)\n\t}\n\n\tstopGame() {\n\t\tthis.body_content.forEach(row => {\n\t\t\trow.firstElementChild.classList.remove('fall')\n\t\t})\n\t}\n\n\tinitBackground() {\n\t\tlet background = document.createElement('div')\n\t\tlet distance = (x1, y1, x2, y2) => {\n\t\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n\t\t}\n\t\tbackground.classList.add('background')\n\t\twhile (this.gameobjects.length < this.total_objects) {\n\t\t\tlet x = Math.random() * 100\n\t\t\tlet y = Math.random() * 100\n\t\t\twhile (this.gameobjects.filter(shape => distance(shape.x, shape.y, x, y) < 10).length) {\n\t\t\t\tx = Math.random() * 100\n\t\t\t\ty = Math.random() * 100\n\t\t\t\t// console.count('fails')\n\t\t\t}\n\t\t\tlet el = document.createElement('span')\n\t\t\tlet shape = 'triangle'\n\t\t\tif (this.gameobjects.length < this.total_squiggle) {\n\t\t\t\tshape = 'squiggle'\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"362\" height=\"42.125\" viewBox=\"0 0 362 42.125\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"10px\" fill-rule=\"evenodd\" d=\"M25,160c10.473-19.526,21.555-33.2,32-32,14.376,1.653,19.472,32,32,32,12.873,0,19.127-32,32-32s19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32c12.527,0,17.624,30.347,32,32,10.445,1.2,21.527-12.474,32-32\" transform=\"translate(-20 -122.938)\"/></svg>'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles) {\n\t\t\t\tshape = 'bubbles'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles + this.total_square) {\n\t\t\t\tshape = 'square'\n\t\t\t} else {\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"226\" height=\"199\" viewBox=\"0 0 226 199\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"12px\" fill-rule=\"evenodd\" d=\"M21,235L128,48,235,235H21Z\" transform=\"translate(-15 -42)\"/></svg>'\n\t\t\t}\n\t\t\tel.classList.add(shape)\n\t\t\tel.style.transform = 'rotate(' + (Math.round(Math.random() * 18) * 20) + 'deg)'\n\t\t\tel.classList.add('color-' + Math.min(3, Math.floor(Math.random() * 4 + 1)))\n\t\t\tbackground.appendChild(el)\n\t\t\tthis.gameobjects.push(new GameObject(x, y, el, shape))\n\t\t}\n\t\tdocument.body.insertBefore(background, document.body.childNodes[0])\n\t}\n\n\tsortShapes() {\n\t\tlet col_count = 0.5\n\t\tlet last_shape\n\t\tthis.gameobjects.map((o, i) => {\n\t\t\tif (last_shape && last_shape != o.shape) {\n\t\t\t\tcol_count = 0.5\n\t\t\t}\n\t\t\tif (o.shape == 'squiggle') {\n\t\t\t\to.x = col_count / this.total_squiggle * 100\n\t\t\t\to.y = 30\n\t\t\t} else if (o.shape == 'bubbles') {\n\t\t\t\to.x = col_count / this.total_bubbles * 100\n\t\t\t\to.y = 40\n\t\t\t} else if (o.shape == 'square') {\n\t\t\t\to.x = col_count / this.total_square * 100\n\t\t\t\to.y = 50\n\t\t\t} else {\n\t\t\t\to.x = col_count / this.total_triangle * 100\n\t\t\t\to.y = 60\n\t\t\t}\n\t\t\to.render()\n\t\t\tcol_count++\n\t\t\tlast_shape = o.shape\n\t\t})\n\t}\n}\n\nclass GameObject {\n\tconstructor(x, y, element, shape) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.el = element\n\t\tthis.shape = shape\n\t\tthis.render()\n\t}\n\trender() {\n\t\tthis.el.style.transition = 'all .5s ease-out'\n\t\tsetTimeout(() => {\n\t\t\tthis.el.style.left = this.x + '%'\n\t\t\tthis.el.style.top = this.y + '%'\n\t\t}, 10)\n\t}\n}\n\nwindow.game = new Game\n"]}