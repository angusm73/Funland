{"version":3,"sources":["game.js"],"names":["Game","constructor","player","total_squiggle","total_bubbles","total_square","total_triangle","score","total_objects","body_content","document","querySelectorAll","gameobjects","initBackground","initSound","initGame","window","front_end","killLaser","stopHeroTimer","forEach","row","i","setTimeout","firstElementChild","classList","add","start_timer","startGame","bind","length","ready","body","addEventListener","e","kc","keyCode","which","stopGame","finishGame","header","querySelector","scrollTo","top","clientHeight","behavior","sortShapes","renderScore","count","move_distance","game_loop","stopped","map","y","x","render","winScreen","start","game_timer_id","requestAnimationFrame","background","tabIndex","focus","Player","clearTimeout","cancelAnimationFrame","o","destroy","win_screen","createElement","innerHTML","btn","appendChild","remove","removeEventListener","_preventScroll","parentNode","removeChild","startHeroTimer","distance","x1","y1","x2","y2","Math","sqrt","random","filter","shape","el","style","setProperty","round","min","floor","push","Enemy","insertBefore","childNodes","shoot_sound","id","src","volume","death_sound","col_count","last_shape","GameObject","element","transition","width","clientWidth","innerWidth","transform","webkitTransform","game","currentTime","play","moving","init","bullets","touchMoveHandler","touchMove","touchEndHandler","touchEnd","keyDownHandler","keyDown","keyUpHandler","keyUp","timer","setInterval","move","b","clearInterval","shoot","shoot_cooldown","bullet","Bullet","targetTouches","target","clientY","innerHeight","clientX","preventDefault","stopPropagation","changedTouches","checkCollisions","colliding"],"mappings":"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","sourcesContent":["class Game {\n\n\tconstructor() {\n\t\tthis.player = null\n\t\tthis.total_squiggle = 8\n\t\tthis.total_bubbles = 8\n\t\tthis.total_square = 20\n\t\tthis.total_triangle = 20\n\t\tthis.score = 0\n\t\tthis.total_objects = this.total_squiggle + this.total_bubbles + this.total_square + this.total_triangle\n\n\t\tthis.body_content = document.querySelectorAll('body > .sw')\n\t\tthis.gameobjects = []\n\n\t\tthis.initBackground()\n\t\tthis.initSound()\n\t\t// this.initGame()\n\t}\n\n\tinitGame() {\n\t\twindow.front_end.killLaser()\n\t\twindow.front_end.stopHeroTimer()\n\t\tthis.body_content.forEach((row, i) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\trow.firstElementChild.classList.add('fall')\n\t\t\t}, i * 600)\n\t\t})\n\t\tthis.start_timer = setTimeout(this.startGame.bind(this), this.body_content.length * 600)\n\n\t\tif (!this.ready) {\n\t\t\tdocument.body.addEventListener('keydown', e => {\n\t\t\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\t\t\tif (kc == 27) {\n\t\t\t\t\tthis.stopGame()\n\t\t\t\t\tthis.finishGame()\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.ready = true\n\t\t}\n\t}\n\n\tstartGame() {\n\t\tlet header = document.querySelector('.header header')\n\t\twindow.scrollTo({\n\t\t\ttop: header.clientHeight,\n\t\t\tbehavior: \"smooth\"\n\t\t})\n\t\tdocument.body.classList.add('gamemode')\n\t\tthis.sortShapes()\n\t\tthis.score = 0\n\t\tthis.renderScore()\n\n\t\t// Move enemies left & right\n\t\tlet count = -50\n\t\tlet move_distance = 0.02\n\t\tlet game_loop = () => {\n\t\t\tif (this.stopped) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (count % 100 == 0) {\n\t\t\t\tmove_distance *= -1\n\t\t\t\tif (count < 1400) {\n\t\t\t\t\tthis.gameobjects.map(i => i.y += 3)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.gameobjects.map(i => i.x += move_distance)\n\t\t\tthis.gameobjects.map(i => i.render())\n\t\t\tif (this.gameobjects.length == 0) {\n\t\t\t\tthis.winScreen()\n\t\t\t}\n\t\t\tcount++\n\t\t}\n\t\tlet start = () => {\n\t\t\tgame_loop()\n\t\t\tthis.stopped = false\n\t\t\tthis.game_timer_id = requestAnimationFrame(start)\n\t\t}\n\t\tstart()\n\n\t\tthis.background.classList.add('active')\n\t\tthis.background.tabIndex = -1\n\t\tthis.background.focus()\n\n\t\tthis.player = new Player()\n\t}\n\n\tstopGame() {\n\t\tclearTimeout(this.start_timer)\n\t\tcancelAnimationFrame(this.game_timer_id)\n\t\tthis.stopped = true\n\t\tthis.gameobjects.map(o => o.destroy())\n\t\tthis.gameobjects = []\n\t\tif (this.player) {\n\t\t\tthis.player.destroy()\n\t\t\tdelete this.player\n\t\t}\n\t}\n\n\twinScreen() {\n\t\tthis.stopGame()\n\t\tthis.win_screen = document.createElement('div')\n\t\tthis.win_screen.classList.add('win-overlay')\n\t\tthis.win_screen.innerHTML = `<h1>You win!</h1><h2>Score: ${this.score}</h2><button class='btn'>Close</button>`\n\t\tlet btn = this.win_screen.querySelector('.btn')\n\t\tbtn.addEventListener('click', this.finishGame.bind(this))\n\t\tbtn.addEventListener('touchend', this.finishGame.bind(this))\n\t\tdocument.body.appendChild(this.win_screen)\n\t}\n\n\tfinishGame() {\n\t\tdocument.body.classList.remove('gamemode')\n\t\tdocument.body.removeEventListener('touchmove', this._preventScroll, false);\n\t\tif (this.win_screen) {\n\t\t\tthis.win_screen.parentNode.removeChild(this.win_screen)\n\t\t}\n\t\tthis.body_content.forEach(row => {\n\t\t\trow.firstElementChild.classList.remove('fall')\n\t\t})\n\t\tthis.background.parentNode.removeChild(this.background)\n\t\tdelete this.background\n\t\tthis.initBackground()\n\t\twindow.front_end.startHeroTimer()\n\t}\n\n\tinitBackground() {\n\t\tif (!this.background) {\n\t\t\tthis.background = document.createElement('div')\n\t\t\tthis.background.classList.add('background')\n\t\t}\n\t\tlet distance = (x1, y1, x2, y2) => {\n\t\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n\t\t}\n\t\twhile (this.gameobjects.length < this.total_objects) {\n\t\t\tlet x = Math.random() * 100\n\t\t\tlet y = Math.random() * 100\n\t\t\twhile (this.gameobjects.filter(shape => distance(shape.x, shape.y, x, y) < 10).length) {\n\t\t\t\tx = Math.random() * 100\n\t\t\t\ty = Math.random() * 100\n\t\t\t\t// console.count('fails')\n\t\t\t}\n\t\t\tlet el = document.createElement('span')\n\t\t\tlet shape = 'triangle'\n\t\t\tif (this.gameobjects.length < this.total_squiggle) {\n\t\t\t\tshape = 'squiggle'\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"362\" height=\"42.125\" viewBox=\"0 0 362 42.125\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"10px\" fill-rule=\"evenodd\" d=\"M25,160c10.473-19.526,21.555-33.2,32-32,14.376,1.653,19.472,32,32,32,12.873,0,19.127-32,32-32s19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32c12.527,0,17.624,30.347,32,32,10.445,1.2,21.527-12.474,32-32\" transform=\"translate(-20 -122.938)\"/></svg>'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles) {\n\t\t\t\tshape = 'bubbles'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles + this.total_square) {\n\t\t\t\tshape = 'square'\n\t\t\t} else {\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"226\" height=\"199\" viewBox=\"0 0 226 199\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"12px\" fill-rule=\"evenodd\" d=\"M21,235L128,48,235,235H21Z\" transform=\"translate(-15 -42)\"/></svg>'\n\t\t\t}\n\t\t\tel.classList.add(shape)\n\t\t\tel.style.setProperty('--angle', (Math.round(Math.random() * 18) * 20) + 'deg')\n\t\t\tel.classList.add('color-' + Math.min(3, Math.floor(Math.random() * 4 + 1)))\n\t\t\tthis.background.appendChild(el)\n\t\t\tthis.gameobjects.push(new Enemy(x, y, el, shape))\n\t\t}\n\t\tdocument.body.insertBefore(this.background, document.body.childNodes[0])\n\t}\n\n\tinitSound() {\n\t\tthis.shoot_sound = document.createElement('audio')\n\t\tthis.shoot_sound.id = 'shoot'\n\t\tthis.shoot_sound.src = '/sound/shoot.wav'\n\t\tthis.shoot_sound.volume = 0.2\n\t\tthis.death_sound = document.createElement('audio')\n\t\tthis.death_sound.id = 'death'\n\t\tthis.death_sound.src = '/sound/explosion.wav'\n\t\tthis.death_sound.volume = 0.3\n\t\tif (this.background) {\n\t\t\tthis.background.appendChild(this.shoot_sound)\n\t\t\tthis.background.appendChild(this.death_sound)\n\t\t}\n\t}\n\n\trenderScore() {\n\t\tlet score = this.background.querySelector('.score')\n\t\tif (!score) {\n\t\t\tscore = document.createElement('span')\n\t\t\tscore.classList.add('score')\n\t\t\tthis.background.appendChild(score)\n\t\t}\n\t\tscore.innerHTML = this.score\n\t}\n\n\tsortShapes() {\n\t\tlet col_count = 0.5\n\t\tlet last_shape\n\t\tthis.gameobjects.map((o, i) => {\n\t\t\tif (last_shape && last_shape != o.shape) {\n\t\t\t\tcol_count = 0.5\n\t\t\t}\n\t\t\tif (o.shape == 'squiggle') {\n\t\t\t\to.x = col_count / this.total_squiggle * 100\n\t\t\t\to.y = 10\n\t\t\t} else if (o.shape == 'bubbles') {\n\t\t\t\to.x = col_count / this.total_bubbles * 100\n\t\t\t\to.y = 20\n\t\t\t} else if (o.shape == 'square') {\n\t\t\t\to.x = col_count / this.total_square * 100\n\t\t\t\to.y = 30\n\t\t\t} else {\n\t\t\t\to.x = col_count / this.total_triangle * 100\n\t\t\t\to.y = 40\n\t\t\t}\n\t\t\to.render()\n\t\t\tcol_count++\n\t\t\tlast_shape = o.shape\n\t\t})\n\t}\n}\n\nclass GameObject {\n\tconstructor(x, y, element, shape) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.el = element\n\t\tthis.el.style.transition = 'all .2s ease-out'\n\t\tthis.el.classList.add('shape')\n\t\tthis.el.classList.add(shape)\n\t\tthis.shape = shape\n\t\t// this.width = this.el.clientWidth\n\t\tthis.render()\n\t\tsetTimeout(() => {\n\t\t\tthis.width = this.el.clientWidth / window.innerWidth * 100\n\t\t\tif (shape == 'squiggle') {\n\t\t\t\tthis.width /= 2\n\t\t\t} else if (shape == 'bubbles') {\n\t\t\t\tthis.width *= 3\n\t\t\t} else if (shape == 'square') {\n\t\t\t\tthis.width *= 2\n\t\t\t}\n\t\t}, 10)\n\t}\n\tdestroy() {\n\t\tif (this.el.parentNode) {\n\t\t\tthis.el.parentNode.removeChild(this.el)\n\t\t}\n\t}\n\trender() {\n\t\tthis.el.style.transform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh)`\n\t\tthis.el.style.webkitTransform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh)`\n\t}\n}\n\nclass Enemy extends GameObject {\n\tdestroy() {\n\t\tsuper.destroy()\n\t\tgame.death_sound.currentTime = 0\n\t\tgame.death_sound.play()\n\t\tgame.score += this.shape == 'square' ? 10 : this.shape == 'triangle' ? 5 : 1\n\t\tgame.renderScore()\n\t}\n\trender() {\n\t\tthis.el.style.transform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh) rotate(var(--angle))`\n\t\tthis.el.style.webkitTransform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh) rotate(var(--angle))`\n\t}\n}\n\nclass Player extends GameObject {\n\tconstructor() {\n\t\tsuper(50, 95, document.createElement('span'), 'player')\n\t\tthis.moving = 0\n\t\tthis.el.style.transition = 'all .05s ease-out'\n\n\t\tthis.background = document.querySelector('.background')\n\t\tthis.background.appendChild(this.el)\n\n\t\tthis.init()\n\t\tthis.render()\n\n\t\tthis.bullets = []\n\t}\n\tinit() {\n\t\tthis.touchMoveHandler = this.touchMove.bind(this)\n\t\tthis.touchEndHandler = this.touchEnd.bind(this)\n\t\tthis.keyDownHandler = this.keyDown.bind(this)\n\t\tthis.keyUpHandler = this.keyUp.bind(this)\n\t\tthis.background.addEventListener('touchstart', this.touchMoveHandler, false)\n\t\tthis.background.addEventListener('touchmove', this.touchMoveHandler, false)\n\t\tthis.background.addEventListener('touchend', this.touchEndHandler, false)\n\t\tthis.background.addEventListener('keydown', this.keyDownHandler, false)\n\t\tthis.background.addEventListener('keyup', this.keyUpHandler, false)\n\t\tthis.timer = setInterval(() => {\n\t\t\tthis.move().render()\n\t\t\tthis.bullets.map(b => b.render())\n\t\t}, 16)\n\t}\n\tdestroy() {\n\t\tsuper.destroy()\n\t\tclearInterval(this.timer)\n\t\tthis.background.removeEventListener('touchstart', this.touchMoveHandler, false)\n\t\tthis.background.removeEventListener('touchmove', this.touchMoveHandler, false)\n\t\tthis.background.removeEventListener('touchend', this.touchEndHandler, false)\n\t\tthis.background.removeEventListener('keydown', this.keyDownHandler, false)\n\t\tthis.background.removeEventListener('keyup', this.keyUpHandler, false)\n\t\tthis.bullets.map(b => b.destroy())\n\t\tthis.bullets = []\n\t}\n\tmove() {\n\t\tif (this.move === 0) {\n\t\t\treturn this\n\t\t}\n\t\tthis.x += this.moving * 0.5\n\t\tif (this.x < 0) {\n\t\t\tthis.x = 0\n\t\t} else if (this.x > 100) {\n\t\t\tthis.x = 100\n\t\t}\n\t\treturn this\n\t}\n\tshoot() {\n\t\tif (this.shoot_cooldown) {\n\t\t\treturn\n\t\t}\n\t\tlet bullet = new Bullet(this.x, this.y)\n\t\tgame.shoot_sound.currentTime = 0\n\t\tgame.shoot_sound.play()\n\t\tthis.background.appendChild(bullet.el)\n\t\tthis.bullets.push(bullet)\n\t\tthis.shoot_cooldown = true\n\t\tsetTimeout(() => {\n\t\t\tthis.shoot_cooldown = false\n\t\t}, 69)\n\t}\n\ttouchMove(e) {\n\t\tfor (let i = 0; i < e.targetTouches.length; i++) {\n\t\t\tconst target = e.targetTouches[i]\n\t\t\tif (target.clientY < window.innerHeight * 0.8) {\n\t\t\t\tthis.shoot()\n\t\t\t} else {\n\t\t\t\tif (target.clientX < window.innerWidth * 0.5) {\n\t\t\t\t\tthis.moving = -1\n\t\t\t\t} else {\n\t\t\t\t\tthis.moving = 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t}\n\ttouchEnd(e) {\n\t\tfor (let i = 0; i < e.changedTouches.length; i++) {\n\t\t\tconst target = e.changedTouches[i]\n\t\t\tif (target.clientY > window.innerHeight * 0.8) {\n\t\t\t\tthis.moving = 0\n\t\t\t}\n\t\t}\n\t}\n\tkeyDown(e) {\n\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\tif (kc == 37) {\n\t\t\tthis.moving = -1\n\t\t\treturn false\n\t\t} else if (kc == 39) {\n\t\t\tthis.moving = 1\n\t\t\treturn false\n\t\t} else if (kc == 32) {\n\t\t\tthis.shoot()\n\t\t\treturn false\n\t\t}\n\t}\n\tkeyUp(e) {\n\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\tif (kc == 37) {\n\t\t\tthis.moving = 0\n\t\t} else if (kc == 39) {\n\t\t\tthis.moving = 0\n\t\t}\n\t}\n}\n\nclass Bullet extends GameObject {\n\tconstructor(x, y) {\n\t\tsuper(x, y, document.createElement('span'), 'bullet')\n\t\tthis.move()\n\t}\n\tmove() {\n\t\tthis.timer = setInterval(() => {\n\t\t\tthis.y -= 0.5\n\t\t\tif (this.y < 0 || this.checkCollisions()) {\n\t\t\t\tthis.destroy()\n\t\t\t}\n\t\t}, 16)\n\t\treturn this\n\t}\n\tdestroy() {\n\t\tsuper.destroy()\n\t\tclearInterval(this.timer)\n\t}\n\tcheckCollisions() {\n\t\tconst colliding = game.gameobjects.filter(o => {\n\t\t\treturn o.x + o.width > this.x && o.x - o.width < this.x && o.y > this.y - 0.3 && o.y < this.y + 0.3\n\t\t})\n\t\tcolliding.map(o => o.destroy())\n\t\tgame.gameobjects = game.gameobjects.filter(o => {\n\t\t\treturn !(o.x + o.width > this.x && o.x - o.width < this.x && o.y > this.y - 0.3 && o.y < this.y + 0.3)\n\t\t})\n\t\treturn !!colliding.length\n\t}\n}\n\nwindow.game = new Game\n"],"file":"game.js"}